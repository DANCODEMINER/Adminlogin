<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Login - Adchain Miner</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Login Container -->
  <div class="login-container" id="login-form">
    <h2>Admin Login</h2>
    <input type="text" id="admin-login-username" placeholder="Username" />
    <input type="password" id="admin-login-password" placeholder="Password" />
    <button onclick="loginAdmin()">Login</button>
    <button id="forgot-password-btn">Forgot Password?</button>
    <p id="login-message"></p>
  </div>

  <!-- Forgot Password Section -->
  <div id="forgot-password-section" style="display: none;">
    <!-- Step 1 -->
    <div id="fp-username-form">
      <h3>Step 1: Enter Username</h3>
      <input type="text" id="fp-username" placeholder="Enter username" />
      <button onclick="sendResetOtp()">Send OTP</button>
      <p id="fp-message"></p>
      <button onclick="showLoginForm()">Back to Login</button>
    </div>

    <!-- Step 2 -->
    <div id="otp-form" style="display: none;">
      <h3>Step 2: Enter OTP</h3>
      <input type="text" id="fp-otp" placeholder="Enter OTP" />
      <button onclick="verifyResetOtp()">Verify OTP</button>
      <p id="otp-message"></p>
      <button onclick="showLoginForm()">Back to Login</button>
    </div>

    <!-- Step 3 -->
    <div id="new-password-form" style="display: none;">
      <h3>Step 3: New Password</h3>
      <input type="password" id="fp-new-password" placeholder="Enter new password" />
      <button onclick="updatePassword()">Update Password</button>
      <p id="newpass-message"></p>
      <button onclick="showLoginForm()">Back to Login</button>
    </div>
  </div>

  <!-- Admin Dashboard Section -->
  <div id="dashboard-section" style="display: none;">
    <h2>Welcome to Admin Dashboard</h2>

    <!-- Navigation Buttons -->
    <div class="admin-nav">
      <button onclick="toggleSection('users-section')">👥 View Users</button>
      <button onclick="toggleSection('withdrawals-section')">💸 View Withdrawals</button>
      <button onclick="toggleSection('announcement-section')">📢 Announcements</button>
      <button onclick="toggleSection('hashrate-section')">⚙️ Hashrate Settings</button>
    </div>

    <!-- Users Section -->
    <div class="admin-container" id="users-section" style="display: none;">
      <h3>Registered Users</h3>
      <table>
        <thead>
          <tr>
            <th>Email</th>
            <th>BTC Balance</th>
            <th>Total Earned</th>
            <th>Hashrate</th>
            <th>Last Mined</th>
          </tr>
        </thead>
        <tbody id="users-table"></tbody>
      </table>
      <button onclick="closeSection('users-section')">🔙 Back</button>
    </div>

    <!-- Withdrawals Section -->
    <div class="admin-container" id="withdrawals-section" style="display: none;">
      <h3>Withdrawal Requests</h3>
      <div>
        <button onclick="approveSelectedWithdrawals()">✅ Approve Selected</button>
        <button onclick="approveAllWithdrawals()">✅ Approve All</button>
        <label><input type="checkbox" id="auto-approve-toggle" onchange="toggleAutoApprove()"> Auto-Approve</label>
      </div>
      <table>
        <thead>
          <tr>
            <th><input type="checkbox" id="select-all" onchange="toggleSelectAll(this)"></th>
            <th>Email</th>
            <th>Amount</th>
            <th>Wallet</th>
            <th>Status</th>
            <th>Date</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="withdrawals-table"></tbody>
      </table>
      <button onclick="closeSection('withdrawals-section')">🔙 Back</button>
    </div>

    <!-- Announcements Section -->
    <div class="admin-container" id="announcement-section" style="display: none;">
      <h3>Post Global Announcement</h3>
      <input type="text" id="announce-title" placeholder="Title" />
      <textarea id="announce-content" rows="4" placeholder="Announcement..."></textarea>
      <button onclick="postAnnouncement()">📬 Post</button>
      <button onclick="deleteAnnouncement()">🗑️ Delete</button>
      <p id="announce-status"></p>
      <button onclick="closeSection('announcement-section')">🔙 Back</button>
    </div>

    <!-- Hashrate Settings Section -->
    <div class="admin-container" id="hashrate-section" style="display: none;">
      <h3>Set Hashrate Per Ad</h3>
      <p>Current Hashrate: <span id="current-hashrate">Loading...</span> H/s</p>
      <input type="number" id="hashrate-value" placeholder="Enter value" />
      <button onclick="updateHashrate()">Update</button>
      <p id="hashrate-msg"></p>
      <button onclick="closeSection('hashrate-section')">🔙 Back</button>
    </div>

    <br />
    <button id="dashboard-logout-btn">🚪 Logout</button>
  </div>

  <!-- Your JS -->
  <script src="Login.js"></script>
</body>
</html>
